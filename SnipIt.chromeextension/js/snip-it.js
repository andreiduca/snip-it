!function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a="function"==typeof require&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}for(var i="function"==typeof require&&require,o=0;o<r.length;o++)s(r[o]);return s}({1:[function(require,module,exports){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_SnipButton=require("../modules/SnipButton"),_SnipButton2=_interopRequireDefault(_SnipButton),_TempMarker=require("../modules/TempMarker"),_TempMarker2=_interopRequireDefault(_TempMarker),_PanelShade=require("../modules/panels/PanelShade"),_PanelShade2=_interopRequireDefault(_PanelShade),_PanelSave=require("../modules/panels/PanelSave"),_PanelSave2=_interopRequireDefault(_PanelSave),SnipIt=function(){function SnipIt(){_classCallCheck(this,SnipIt),this.isPanelOpen=!1}return _createClass(SnipIt,[{key:"getSelection",value:function(){return this._window.getSelection()}},{key:"getSelectionText",value:function(selection){return selection.toString().trim()}},{key:"onMouseUp",value:function(){if(!this.isPanelOpen){var selection=this.getSelection(),selectionText=this.getSelectionText(selection);if(selectionText.length>0){var range=selection.getRangeAt(0).cloneRange();range.collapse(!1),range.insertNode(_TempMarker2["default"].create()),_SnipButton2["default"].setPosition(_TempMarker2["default"].getPosition()),_TempMarker2["default"].destroy()}else _SnipButton2["default"].destroy()}}},{key:"init",value:function(window,document){this._window=window,this._document=document,_SnipButton2["default"].init(window,document),_TempMarker2["default"].init(window,document),_PanelShade2["default"].init(window,document),_PanelSave2["default"].init(window,document),this._document.onmouseup=this.onMouseUp.bind(this),_SnipButton2["default"].onClick=this.onButtonClick.bind(this),_PanelShade2["default"].onClick=this.onHidePanels.bind(this)}},{key:"onButtonClick",value:function(){_SnipButton2["default"].destroy();var selection=this.getSelection(),selectionText=this.getSelectionText(selection);selectionText&&(this.isPanelOpen=!0,_PanelShade2["default"].show(),_PanelSave2["default"].show(selectionText))}},{key:"onHidePanels",value:function(){this.isPanelOpen=!1,_PanelSave2["default"].hide(),_PanelShade2["default"].hide()}}]),SnipIt}();exports["default"]=new SnipIt},{"../modules/SnipButton":5,"../modules/TempMarker":6,"../modules/panels/PanelSave":7,"../modules/panels/PanelShade":8}],2:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports["default"]=function(htmlText){return String(htmlText).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}},{}],3:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports["default"]=function(document){var tags=[],relTags=document.querySelectorAll("[rel='tag']");if(relTags.length)for(var i=0,n=relTags.length;n>i;i++){var tag=relTags[i].innerText;tags.indexOf(tag)>-1||tags.push(tag)}return tags}},{}],4:[function(require,module,exports){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),HTMLElement=function(){function HTMLElement(elementType,elementId){var clickCallback=arguments.length<=2||void 0===arguments[2]?!1:arguments[2],attachToDocumentBody=arguments.length<=3||void 0===arguments[3]?!1:arguments[3];_classCallCheck(this,HTMLElement),this._elementType=elementType,this._elementId=elementId,this._clickCallback=clickCallback,this._attachToDocumentBody=attachToDocumentBody}return _createClass(HTMLElement,[{key:"init",value:function(window,document){this._window=window,this._document=document}},{key:"create",value:function(){var element=this.get();return element||(element=this._document.createElement(this._elementType),element.id=this._elementId,this._clickCallback&&(element.onclick=this.onClick),this._attachToDocumentBody&&this._document.body.appendChild(element)),element}},{key:"get",value:function(){return this._document.getElementById(this._elementId)}},{key:"show",value:function(){var element=this.create();return element.style.display="block",element}},{key:"hide",value:function(){var element=this.get();return element&&(element.style.display="none"),element}},{key:"destroy",value:function(){var element=this.get();element&&element.parentNode.removeChild(element)}},{key:"onClick",value:function(){}}]),HTMLElement}();exports["default"]=HTMLElement},{}],5:[function(require,module,exports){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_get=function get(object,property,receiver){null===object&&(object=Function.prototype);var desc=Object.getOwnPropertyDescriptor(object,property);if(void 0===desc){var parent=Object.getPrototypeOf(object);return null===parent?void 0:get(parent,property,receiver)}if("value"in desc)return desc.value;var getter=desc.get;if(void 0!==getter)return getter.call(receiver)},_HTMLElement2=require("./HTMLElement"),_HTMLElement3=_interopRequireDefault(_HTMLElement2),snipButtonId="snipItButton",snipButtonText="Snip It!",SnipButton=function(_HTMLElement){function SnipButton(){return _classCallCheck(this,SnipButton),_possibleConstructorReturn(this,Object.getPrototypeOf(SnipButton).call(this,"button",snipButtonId,!0,!0))}return _inherits(SnipButton,_HTMLElement),_createClass(SnipButton,[{key:"create",value:function(){var btn=_get(Object.getPrototypeOf(SnipButton.prototype),"create",this).call(this);return btn.innerText=snipButtonText,btn}},{key:"setPosition",value:function(position){var btn=this.create();btn.style.top=position.top+"px",btn.style.left=position.left+"px"}}]),SnipButton}(_HTMLElement3["default"]);exports["default"]=new SnipButton},{"./HTMLElement":4}],6:[function(require,module,exports){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_get=function get(object,property,receiver){null===object&&(object=Function.prototype);var desc=Object.getOwnPropertyDescriptor(object,property);if(void 0===desc){var parent=Object.getPrototypeOf(object);return null===parent?void 0:get(parent,property,receiver)}if("value"in desc)return desc.value;var getter=desc.get;if(void 0!==getter)return getter.call(receiver)},_HTMLElement2=require("./HTMLElement"),_HTMLElement3=_interopRequireDefault(_HTMLElement2),tmpMarkerId="snipItTemporaryMarker",tmpMarkerText="x",TempMarker=function(_HTMLElement){function TempMarker(){return _classCallCheck(this,TempMarker),_possibleConstructorReturn(this,Object.getPrototypeOf(TempMarker).call(this,"span",tmpMarkerId,!1,!1))}return _inherits(TempMarker,_HTMLElement),_createClass(TempMarker,[{key:"create",value:function(){var marker=_get(Object.getPrototypeOf(TempMarker.prototype),"create",this).call(this);return marker.appendChild(this._document.createTextNode(tmpMarkerText)),marker}},{key:"getPosition",value:function(){var obj=this.get(),left=0,top=0;do left+=obj.offsetLeft,top+=obj.offsetTop;while(obj=obj.offsetParent);return{top:top,left:left}}}]),TempMarker}(_HTMLElement3["default"]);exports["default"]=new TempMarker},{"./HTMLElement":4}],7:[function(require,module,exports){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_get=function get(object,property,receiver){null===object&&(object=Function.prototype);var desc=Object.getOwnPropertyDescriptor(object,property);if(void 0===desc){var parent=Object.getPrototypeOf(object);return null===parent?void 0:get(parent,property,receiver)}if("value"in desc)return desc.value;var getter=desc.get;if(void 0!==getter)return getter.call(receiver)},_HTMLElement2=require("../HTMLElement"),_HTMLElement3=_interopRequireDefault(_HTMLElement2),_HtmlEntities=require("../../helpers/HtmlEntities"),_HtmlEntities2=_interopRequireDefault(_HtmlEntities),_TagFinder=require("../../helpers/TagFinder"),_TagFinder2=_interopRequireDefault(_TagFinder),panelSaveId="snipItPanelSave",PanelSave=function(_HTMLElement){function PanelSave(){return _classCallCheck(this,PanelSave),_possibleConstructorReturn(this,Object.getPrototypeOf(PanelSave).call(this,"div",panelSaveId,!1,!0))}return _inherits(PanelSave,_HTMLElement),_createClass(PanelSave,[{key:"show",value:function(){var text=arguments.length<=0||void 0===arguments[0]?null:arguments[0],panel=_get(Object.getPrototypeOf(PanelSave.prototype),"show",this).call(this),tags=(0,_TagFinder2["default"])(this._document);tags.length&&(tags=tags.map(function(item){return'<span class="snipItTag">'+item+"</span>"}).join(" ")),panel.innerHTML='\n            <div>\n                <form>\n                    <div>\n                        <label for="snipItTitle">Title:</label>\n                        <input type="text" name="snipItTitle" id="snipItTitle" value="'+this._document.title+'" autocomplete="off" />\n                    </div>'+('<div>\n                        <label class="snipItInlineLabel">Language:</label>\n                        JavaScript\n                        <small>(detected; <a href="#!">change</a>)</small>\n                    </div>\n                    <div>\n                        <label class="snipItInlineLabel">Tags:</label>\n                        '+tags+'\n                    </div>\n                    <div>\n                        <label for="snipItCodeBlock">Code:</label>\n                        <textarea name="snipItCodeBlock" id="snipItCodeBlock" rows="10" wrap="off">'+(0,_HtmlEntities2["default"])(text)+"</textarea>\n                    </div>\n                    <button>Save!</button>\n                </form>\n            </div>")}}]),PanelSave}(_HTMLElement3["default"]);exports["default"]=new PanelSave},{"../../helpers/HtmlEntities":2,"../../helpers/TagFinder":3,"../HTMLElement":4}],8:[function(require,module,exports){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}Object.defineProperty(exports,"__esModule",{value:!0});var _HTMLElement2=require("../HTMLElement"),_HTMLElement3=_interopRequireDefault(_HTMLElement2),panelShadeId="snipItPanelShade",PanelShade=function(_HTMLElement){function PanelShade(){return _classCallCheck(this,PanelShade),_possibleConstructorReturn(this,Object.getPrototypeOf(PanelShade).call(this,"div",panelShadeId,!0,!0))}return _inherits(PanelShade,_HTMLElement),PanelShade}(_HTMLElement3["default"]);exports["default"]=new PanelShade},{"../HTMLElement":4}],9:[function(require,module,exports){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}var _SnipIt=require("./app/SnipIt"),_SnipIt2=_interopRequireDefault(_SnipIt);_SnipIt2["default"].init(window,document)},{"./app/SnipIt":1}]},{},[9]);