!function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a="function"==typeof require&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}for(var i="function"==typeof require&&require,o=0;o<r.length;o++)s(r[o]);return s}({1:[function(require,module,exports){"use strict";function hasOwnProperty(obj,prop){return Object.prototype.hasOwnProperty.call(obj,prop)}module.exports=function(qs,sep,eq,options){sep=sep||"&",eq=eq||"=";var obj={};if("string"!=typeof qs||0===qs.length)return obj;var regexp=/\+/g;qs=qs.split(sep);var maxKeys=1e3;options&&"number"==typeof options.maxKeys&&(maxKeys=options.maxKeys);var len=qs.length;maxKeys>0&&len>maxKeys&&(len=maxKeys);for(var i=0;len>i;++i){var kstr,vstr,k,v,x=qs[i].replace(regexp,"%20"),idx=x.indexOf(eq);idx>=0?(kstr=x.substr(0,idx),vstr=x.substr(idx+1)):(kstr=x,vstr=""),k=decodeURIComponent(kstr),v=decodeURIComponent(vstr),hasOwnProperty(obj,k)?isArray(obj[k])?obj[k].push(v):obj[k]=[obj[k],v]:obj[k]=v}return obj};var isArray=Array.isArray||function(xs){return"[object Array]"===Object.prototype.toString.call(xs)}},{}],2:[function(require,module,exports){"use strict";function map(xs,f){if(xs.map)return xs.map(f);for(var res=[],i=0;i<xs.length;i++)res.push(f(xs[i],i));return res}var stringifyPrimitive=function(v){switch(typeof v){case"string":return v;case"boolean":return v?"true":"false";case"number":return isFinite(v)?v:"";default:return""}};module.exports=function(obj,sep,eq,name){return sep=sep||"&",eq=eq||"=",null===obj&&(obj=void 0),"object"==typeof obj?map(objectKeys(obj),function(k){var ks=encodeURIComponent(stringifyPrimitive(k))+eq;return isArray(obj[k])?map(obj[k],function(v){return ks+encodeURIComponent(stringifyPrimitive(v))}).join(sep):ks+encodeURIComponent(stringifyPrimitive(obj[k]))}).join(sep):name?encodeURIComponent(stringifyPrimitive(name))+eq+encodeURIComponent(stringifyPrimitive(obj)):""};var isArray=Array.isArray||function(xs){return"[object Array]"===Object.prototype.toString.call(xs)},objectKeys=Object.keys||function(obj){var res=[];for(var key in obj)Object.prototype.hasOwnProperty.call(obj,key)&&res.push(key);return res}},{}],3:[function(require,module,exports){"use strict";exports.decode=exports.parse=require("./decode"),exports.encode=exports.stringify=require("./encode")},{"./decode":1,"./encode":2}],4:[function(require,module,exports){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_querystring=require("querystring"),_querystring2=_interopRequireDefault(_querystring),XHR=function(){function XHR(){_classCallCheck(this,XHR),this.xhr=new XMLHttpRequest}return _createClass(XHR,[{key:"setBackendPath",value:function(path){this.backend=path}},{key:"send",value:function(_ref){var _this=this,_ref$type=_ref.type,type=void 0===_ref$type?"get":_ref$type,url=_ref.url,data=_ref.data,onSuccess=_ref.onSuccess,onFail=_ref.onFail,APIUrl=(this.backend||"")+url;this.xhr.open(type.toUpperCase(),APIUrl,!0),this.xhr.setRequestHeader("Content-type","application/x-www-form-urlencoded"),this.xhr.onerror=function(){"function"==typeof onFail&&onFail()},this.xhr.onload=function(){_this.xhr.status>=200&&_this.xhr.status<300&&"function"==typeof onSuccess&&onSuccess(_this.xhr.response)},this.xhr.send(_querystring2.default.encode(data))}},{key:"get",value:function(_ref2){var url=_ref2.url,data=_ref2.data,_ref2$onSuccess=_ref2.onSuccess,onSuccess=void 0===_ref2$onSuccess?null:_ref2$onSuccess,_ref2$onFail=_ref2.onFail,onFail=void 0===_ref2$onFail?null:_ref2$onFail;this.send({type:"get",url:url,data:data,onSuccess:onSuccess,onFail:onFail})}},{key:"post",value:function(_ref3){var url=_ref3.url,data=_ref3.data,_ref3$onSuccess=_ref3.onSuccess,onSuccess=void 0===_ref3$onSuccess?null:_ref3$onSuccess,_ref3$onFail=_ref3.onFail,onFail=void 0===_ref3$onFail?null:_ref3$onFail;this.send({type:"post",url:url,data:data,onSuccess:onSuccess,onFail:onFail})}}]),XHR}();exports.default=new XHR},{querystring:3}],5:[function(require,module,exports){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_XHR=require("../XHR"),_XHR2=_interopRequireDefault(_XHR),VendorChrome=function(){function VendorChrome(chrome){_classCallCheck(this,VendorChrome),this.chrome=chrome}return _createClass(VendorChrome,[{key:"setBackendPath",value:function(path){_XHR2.default.setBackendPath(path)}},{key:"sendXHR",value:function(data){this.sendMessage({action:"send_xhr",data:data})}},{key:"sendMessage",value:function(_ref){var _ref$action=_ref.action,action=void 0===_ref$action?"":_ref$action,_ref$tab=_ref.tab,tab=void 0===_ref$tab?null:_ref$tab,data=_ref.data;tab?this.chrome.tabs.sendMessage(tab.id,{action:action,data:data},function(response){console.log("tab said",response)}):this.chrome.runtime.sendMessage({action:action,data:data},function(response){console.log("background.js said",response)})}},{key:"registerReceiveMessages",value:function(){var _this=this;this.chrome.runtime.onMessage.addListener(function(request,sender,messageCallback){var response=null;switch(request.action){case"send_xhr":sender.tab&&(request.data.onSuccess=function(response){_this.sendMessage({action:"receive_xhr",tab:sender.tab,data:response})},request.data.onFail=function(){_this.sendMessage({action:"receive_xhr",tab:sender.tab,data:{status:"error"}})},_XHR2.default.send(request.data),response="sent_xhr");break;case"receive_xhr":_this.callbackProxy(request.data),response="received_xhr"}messageCallback({message:response})})}},{key:"callbackProxy",value:function(){}}]),VendorChrome}();exports.default=VendorChrome},{"../XHR":4}],6:[function(require,module,exports){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var _VendorChrome=require("../../helpers/vendor_strategies/VendorChrome"),_VendorChrome2=_interopRequireDefault(_VendorChrome),backendUrl="http://localhost:3000",vendor=new _VendorChrome2.default(chrome);vendor.setBackendPath(backendUrl),vendor.registerReceiveMessages()},{"../../helpers/vendor_strategies/VendorChrome":5}]},{},[6]);